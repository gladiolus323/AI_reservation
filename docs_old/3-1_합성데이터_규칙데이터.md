# 합성데이터 생성 - 규칙 데이터

**최종 수정일**: 2025-12-24

---

## 1. 개요

### 1.1 생성 목적

검사 예약 시스템에서 적용할 **비즈니스 규칙**을 정형화한 데이터입니다.

1. **검사 마스터 데이터**: 병원에서 시행하는 모든 검사 항목의 기본 정보
2. **조건 규칙**: 환자 조건(나이, 질환 등)에 따른 검사 제약
3. **관계 규칙**: 검사 간 선후관계, 간격, 동일일 시행 가능 여부

### 1.2 생성 규모

| 테이블 | 건수 | 설명 |
|--------|------|------|
| EXAM_MASTER | 265건 | 검사 항목 마스터 |
| EXAM_CONDITION_RULES | 47건 (20 RULE_ID) | 조건 규칙 |
| EXAM_RELATION_RULES | 87건 | 관계 규칙 |

### 1.3 원본 데이터

| 원본 | 용도 | 비고 |
|------|------|------|
| 통합 검사예약업무 매뉴얼.pdf (38페이지) | 규칙 추출 | 영상의학과, 핵의학과, 내시경, 기능검사 등 |
| constraints.csv (251개 검사) | 기본 검사 목록 | 소요시간은 매뉴얼 기준으로 수정 |

---

## 2. EXAM_MASTER (검사 마스터)

### 2.1 컬럼 정의

| 컬럼명 | 타입 | 필수 | 설명 | 예시 |
|--------|------|------|------|------|
| EXAM_CD | VARCHAR(10) | Y | 검사 코드 | RC060003 |
| EXAM_NM | VARCHAR(100) | Y | 검사명 | Abdomen CT (CE) |
| DURATION_MIN | INT | Y | 소요 시간(분) | 20 |
| PREP_MIN | INT | N | 준비 시간(분) | 60 |
| WALK_IN_POLICY | CHAR(1) | N | 당일예약 정책 (A/C/R) | A |
| RESULT_DAYS | FLOAT | N | 결과 소요일 | 3.0 |
| FASTING_HRS | FLOAT | N | 금식 시간 | 8.0 |
| CONTRAST_YN | CHAR(1) | N | 조영제 사용 여부 | Y |
| SEDATION_YN | CHAR(1) | N | 진정(수면) 여부 | Y |
| MIN_AGE | INT | N | 최소 연령 | - |
| MAX_AGE | INT | N | 최대 연령 | - |
| AVAIL_START_TIME | TIME | N | 검사 가능 시작 시간 | 21:00 |
| AVAIL_END_TIME | TIME | N | 검사 가능 종료 시간 | 06:00 |
| EQUIPMENT_TYPE | VARCHAR(10) | Y | 장비 유형 | CT |

### 2.2 장비별 분포

| 장비 | 검사 수 | 비율 | 코드 prefix |
|------|---------|------|-------------|
| CT | 67개 | 25.3% | RC, HA |
| MRI | 65개 | 24.5% | RM |
| FUNC | 76개 | 28.7% | SC (SC03 제외) |
| US | 29개 | 10.9% | RU |
| NM | 11개 | 4.2% | NM |
| ENDO | 9개 | 3.4% | SC03 |
| XRAY | 3개 | 1.1% | RX |
| FLUORO | 5개 | 1.9% | RF |
| **합계** | **265개** | **100%** | |

### 2.3 주요 속성 분포

#### 소요시간 (DURATION_MIN)

| 검사 유형 | 소요시간 | 매뉴얼 근거 |
|----------|----------|-------------|
| PET | 120분 | 핵의학 검사 지침 |
| Cardiac CT | 90분 | 영상의학과 안내 (맥박조절 포함) |
| Heart MR | 120분 | MRI 2시간, 1일 1번 제한 |
| 일반 MRI | 30~45분 | MRI 평균 소요시간 |
| 일반 CT | 20분 | CT 표준 소요시간 |
| 내시경 (진정) | 30분 | 준비시간 60분 별도 |
| PSG (수면다원) | 480분 | 야간 검사 |

#### 조영제 사용 (CONTRAST_YN=Y)

검사명에서 키워드 추출:
- `(CE)`, `Contrast`, `조영` 포함 시 Y
- CT: 39개, MRI: 32개, NM: 1개 (PET TORSO CONTRAST)

#### 진정/수면 (SEDATION_YN=Y)

검사명에서 키워드 추출:
- `수면`, `진정`, `포폴` 포함 시 Y
- ENDO: 6개 (수면내시경, 진정 결장경 등)

#### 금식 필요 (FASTING_HRS)

| 검사 | 금식 시간 | 매뉴얼 근거 |
|------|----------|-------------|
| CT 조영검사 | 8시간 | 성인 기준 |
| MRI 조영검사 | 8시간 | 성인 기준 |
| MRI Liver (Primovist) | 6시간 | 간 MRI 특수 조영제 |
| 내시경 | 8시간 | 상부/대장내시경 |

#### 특수 시간대 검사 (AVAIL_START/END_TIME)

| 검사 | EXAM_CD | 시작 시간 | 종료 시간 | 비고 |
|------|---------|-----------|-----------|------|
| PSG (수면다원검사) | SC070001 | 21:00 | 06:00 | 야간 시행 |
| MSLT (주간졸림검사) | SC070002 | 08:30 | 17:00 | PSG 다음날 시행 |

**시간 제한 이원화 설계**:
- EXAM_MASTER (AVAIL_START/END_TIME): 검사 자체 운영 시간 (모든 환자 적용)
- EXAM_CONDITION_RULES (TIMEONLY): 조건부 시간 제한 (특정 환자만 적용)

### 2.4 추가 정의 검사 (14개)

constraints.csv(251개)에 없지만 매뉴얼 규칙에서 필요한 검사:

| EXAM_CD | EXAM_NM | 장비 | DURATION_MIN | 추가 사유 |
|---------|---------|------|--------------|----------|
| RX010001 | BMD (골밀도검사) | XRAY | 15 | CT→BMD 3일 간격 규칙 |
| RX020001 | Mammography | XRAY | 20 | Mammography→핵의학 순서 규칙 |
| RX030001 | EOS (전척추촬영) | XRAY | 15 | EOS→Bone scan 순서 규칙 |
| RF020001 | Defecogram (배변조영술) | FLUORO | 30 | 대장내시경→Defecogram 간격 |
| RF030001 | Esophagography (식도조영술) | FLUORO | 20 | CT↔Esophagography 간격 |
| RF040001 | VCUG (배뇨방광요도조영술) | FLUORO | 30 | VCUG↔Renal Scan 간격 |
| SC040001 | UBT (요소호기검사) | FUNC | 20 | UBT→내시경 순서 규칙 |
| SC050001 | Esophageal Manometry | FUNC | 40 | 식도내압↔위내시경 간격 |
| SC050002 | Anorectal Manometry | FUNC | 40 | 항문내압→대장내시경 간격 |
| SC060001 | CPX (심폐운동검사) | FUNC | 60 | Heart MR→CPX 관계 |
| SC070001 | PSG (수면다원검사) | FUNC | 480 | 수면검사 스케줄 규칙 |
| SC070002 | MSLT (주간졸림검사) | FUNC | 480 | PSG 다음날 시행 규칙 |
| RM060001 | Breast MRI (유방 MRI) | MRI | 40 | 유방 MRI→초음파 2일 간격 |
| RU060001 | Breast Sono (유방 초음파) | US | 30 | 유방 MRI→초음파 2일 간격 |

---

## 3. EXAM_CONDITION_RULES (조건 규칙)

### 3.1 컬럼 정의

| 컬럼명 | 타입 | 설명 | 예시 |
|--------|------|------|------|
| RULE_ID | VARCHAR(10) | 규칙 ID | R001 |
| EXAM_CD | VARCHAR(10) | 검사 코드 | RC060003 |
| COND_TYPE | VARCHAR(20) | 조건 유형 | AGE |
| COND_OP | VARCHAR(10) | 비교 연산자 | < |
| COND_VAL | VARCHAR(50) | 조건 값 | 19 |
| ACTION_CD | VARCHAR(20) | 액션 코드 | GUARD |
| ACTION_VAL | VARCHAR(100) | 액션 값 | 보호자동반필수 |

### 3.2 조건 유형 (COND_TYPE)

| COND_TYPE | 건수 | 설명 | 예시 |
|-----------|------|------|------|
| AGE | 17건 | 연령 조건 | AGE < 19 |
| MED | 13건 | 복용 약물 조건 | MED STOP Metformin |
| WEEKDAY | 5건 | 요일 조건 | WEEKDAY IN 토/일 |
| ALLERGY | 4건 | 알러지 조건 | ALLERGY = Y |
| PREG | 2건 | 임신 조건 | PREG = Y |
| DEVICE | 2건 | 체내장치 조건 | DEVICE = 심박동기 |
| DISEASE | 4건 | 질환 조건 | DISEASE = 당뇨 |
| INTERVAL | 1건 | 검사 간격 조건 | INTERVAL < 11M |

### 3.3 액션 코드 (ACTION_CD)

| ACTION_CD | 건수 | 설명 | 매뉴얼 근거 |
|-----------|------|------|-------------|
| TIMEONLY | 11건 | 특정 시간대만 가능 | 소아 CT 2~3시, 진정검사 9:30~15:30 |
| STOPMED | 10건 | 약물 중단 필요 | Metformin 2일, Aspirin 5~7일 |
| FASTING | 8건 | 금식 조건 변경 | 신생아 4시간, 소아 6시간, 성인 8시간 |
| GUARD | 5건 | 보호자 동반 필수 | 만 19세 미만 조영제 검사 |
| NOWEEKEND | 5건 | 주말 불가 | 소아 CT, 진정 MRI |
| CONSENT | 4건 | 동의서/확인 필요 | 조영제 알러지 환자 |
| PRETEST | 2건 | 사전/사후 조치 필요 | 투석환자 CT 후 투석 |

### 3.4 매뉴얼-데이터 매핑 상세

#### 연령 기반 규칙 (페이지 1, 8)

| RULE_ID | 매뉴얼 원문 | 데이터 표현 |
|---------|------------|-------------|
| R001 | 만 19세 미만 조영제(MR,CT) 사용 시 보호자 동반 필수 | AGE<19, ACTION=GUARD |
| R002 | 소아(만15세이하) CT → 2시~3시 예약 | AGE<=15, ACTION=TIMEONLY "14:00~15:00" |
| R003 | 진정 MRI/CT → 9:30~15:30 예약 | AGE<=15, ACTION=TIMEONLY "9:30~15:30" |
| R014 | 신생아 CT → 4시간 금식 | AGE<=0.1, ACTION=FASTING "4시간금식" |
| R015 | 소아 CT → 6시간 금식 | AGE<=15, ACTION=FASTING "6시간금식" |
| R016 | 성인 CT → 8시간 금식 | AGE>15, ACTION=FASTING "8시간금식" |

#### 요일 기반 규칙 (페이지 1)

| RULE_ID | 매뉴얼 원문 | 데이터 표현 |
|---------|------------|-------------|
| R004 | 소아 CT → 토,일 불가 | WEEKDAY IN 토/일, ACTION=NOWEEKEND |
| R005 | 진정 MRI → 주말 불가 | WEEKDAY IN 토/일, ACTION=NOWEEKEND |
| R017 | 진정 MRI 토요일 → 오전만 가능 | WEEKDAY=토요일, ACTION=TIMEONLY |

#### 복약 기반 규칙 (페이지 2, 8)

| RULE_ID | 매뉴얼 원문 | 데이터 표현 |
|---------|------------|-------------|
| R006 | Metformin → CT 전후 2일 중단 | MED STOP Metformin, STOPMED |
| R007 | IMC Metformin → 3일 중단 | MED STOP Metformin(IMC), STOPMED |
| R008 | 아스피린 → 내시경 5~7일 중단 | MED STOP Aspirin, STOPMED |
| R013 | 당뇨환자 PET → 당일 인슐린 금지 | MED!=인슐린당일, FASTING |

#### 기타 조건 규칙

| RULE_ID | 매뉴얼 원문 | 데이터 표현 |
|---------|------------|-------------|
| R009 | 조영제 알레르기 → 덱사/페닐주 확인 | ALLERGY=Y, CONSENT |
| R010 | 임산부 MRI Pelvis → 조영제 미사용 | PREG=Y, FASTING |
| R011 | 심박동기 환자 → 평일 근무시간 내 | DEVICE=심박동기, TIMEONLY |
| R012 | 당뇨환자 PET → 오전 예약 필수 | DISEASE=당뇨, TIMEONLY |
| R018 | BMD 11개월 미만 → 비급여 | INTERVAL<11M, FASTING "비급여전환" |
| R020 | 투석환자 CT 조영제 → CT 후 투석 | DISEASE=투석, PRETEST |

---

## 4. EXAM_RELATION_RULES (관계 규칙)

### 4.1 컬럼 정의

| 컬럼명 | 타입 | 설명 | 예시 |
|--------|------|------|------|
| EXAM_A | VARCHAR(10) | 선행 검사 코드 | SC030010 |
| EXAM_B | VARCHAR(10) | 후행 검사 코드 | RC060003 |
| SEQ_REQ_YN | CHAR(1) | 순서 필수 여부 | Y |
| SAME_DAY_CD | CHAR(1) | 동일일 코드 (Y/N/C) | C |
| GAP_VALUE | INT | 간격 값 | 60 |
| GAP_UNIT | CHAR(1) | 간격 단위 (M/H/D) | M |
| REV_GAP_VALUE | INT | 역방향 간격 값 | 7 |
| REV_GAP_UNIT | CHAR(1) | 역방향 간격 단위 | D |
| REASON_CD | VARCHAR(20) | 사유 코드 | SEDATION |

### 4.2 동일일 코드 (SAME_DAY_CD)

| 코드 | 의미 | 건수 | 설명 | 해석 규칙 |
|------|------|------|------|----------|
| Y | 당일 필수 | 8건 | 반드시 같은 날 시행 | 두 검사 같은 날 배치 |
| N | 당일 불가 | 27건 | 반드시 다른 날 시행 | GAP_VALUE=NULL이면 기본 1일 간격 |
| C | 당일 가능 | 52건 | 같은 날 시행 가능 | 같은 날 또는 GAP_VALUE 간격 |

### 4.3 매뉴얼-데이터 매핑 상세

#### CT-핵의학 간격 규칙 (페이지 1, 8, 10)

| 매뉴얼 원문 | 데이터 표현 |
|------------|-------------|
| CT → BMD 3일 뒤 (조영제 때문) | RC060003→RX010001: N, 3D, CONTRAST |
| CT(조영제) → PET 1일 뒤 | RC060003→NM020003: N, 1D |
| CT(조영제+메포민) → PET 3일 뒤 | RC060003→NM020003: N, 3D, CONTRAST |
| 핵의학 검사끼리 2일 간격 | NM010013→NM010014: N, 2D, RADIATION |

#### MRI 간격 규칙 (페이지 6)

| 매뉴얼 원문 | 데이터 표현 |
|------------|-------------|
| MRI 조영제→조영제 24시간 | RM050059→RM050059: N, 24H, CONTRAST |
| MRI 다른날 먼저 → PET 다음날 | RM050059→NM020003: N, 1D |
| Brain MRI → PET 같은날 가능 | RM050031→NM020003: N, Y |

#### 내시경 관련 규칙 (페이지 2)

| 매뉴얼 원문 | 데이터 표현 |
|------------|-------------|
| 대장내시경 → CT 1시간 후 | SC030010→RC060003: SEQ=Y, C, 60M, SEDATION |
| 위+대장 내시경 같은날 가능 | SC030005→SC030010: N, Y |
| 위내시경 → PET 불가 | SC030005→NM020003: N, N |

#### 투시 관련 규칙 (페이지 17)

| 매뉴얼 원문 | 데이터 표현 |
|------------|-------------|
| CT → 투시 2일 뒤 | RC060003→RF010002: N, 2D (REV 7D) |
| 투시 → CT 7일 뒤 | RF010002→SC030010: N, 7D |
| 대장내시경 → Defecogram 다른날 | SC030010→RF020001: N, 1D, BOWEL |

### 4.4 순서 필수 규칙 (SEQ_REQ_YN=Y)

| EXAM_A (먼저) | EXAM_B (나중) | 간격 | 사유 | 매뉴얼 페이지 |
|---------------|---------------|------|------|---------------|
| SC030010 (대장내시경) | RC060003 (복부CT조영) | 60분 | 진정 | p.2 |
| SC030009 (수면결장경) | RC060003 (복부CT조영) | 60분 | 진정 | p.2 |
| SC040001 (UBT) | SC030005 (상부내시경) | 60분 | - | p.3 |
| RU010003 (복부초음파) | SC030005 (상부내시경) | - | - | p.4 |
| SC050001 (식도내압) | SC030005 (상부내시경) | 30분 | - | p.3 |
| SC070001 (PSG) | SC070002 (MSLT) | 1일 | 수면검사 | p.35 |
| RC050002 (심장CT) | RM010029 (Heart MRI) | - | 금식 | p.6 |

### 4.5 양방향 간격 규칙 (REV_GAP)

검사 순서에 따라 간격이 다른 경우:

| EXAM_A | EXAM_B | 정방향 (A→B) | 역방향 (B→A) | 비고 |
|--------|--------|-------------|-------------|------|
| RC060003 (복부CT) | RF010002 (연하곤란평가) | 2일 | 7일 | 조영제 |
| RC060003 (복부CT) | RF030001 (식도조영술) | 1일 | 7일 | 조영제 |
| SC030005 (상부내시경) | SC050001 (식도내압) | 120분 | 30분 | - |
| RC050002 (심장CT) | NM010024 (부갑상선스캔) | 2일 | 1일 | 조영제 |

**해석 규칙**:
- SEQ_REQ_YN=Y: 순서 필수, 역방향 불가 (REV_GAP 무시)
- SEQ_REQ_YN=N + REV_GAP=NULL: 양방향 동일 간격
- SEQ_REQ_YN=N + REV_GAP 있음: 방향별 간격 다름

### 4.6 사유 코드 (REASON_CD)

| REASON_CD | 건수 | 설명 | 예시 |
|-----------|------|------|------|
| (없음) | 49건 | 일반 규칙 | 위+대장 내시경 같은날 |
| CONTRAST | 18건 | 조영제 관련 | CT→BMD 3일 |
| SEDATION | 3건 | 진정 관련 | 내시경→CT 60분 |
| FASTING | 2건 | 금식 관련 | 심장CT→간MRI 순서 |
| BOWEL | 2건 | 장정결 관련 | 대장내시경→Defecogram |
| RADIATION | 2건 | 방사선 관련 | 핵의학→핵의학 2일 |

---

## 5. 규칙 설계 원칙

### 5.1 의료 안전성

1. **조영제 안전**:
   - Metformin 복용자 CT 전후 2일 중단 (유산증 예방)
   - 조영제 검사 간 최소 간격 유지 (신장 보호)
   - 조영제 알러지 환자 사전 약물 투여

2. **진정 안전**:
   - 수면내시경 후 조영CT 60분 간격 (회복 시간)
   - 소아 검사 보호자 동반 (만 19세 미만)
   - 진정 검사 주말 제한 (응급 대응)

3. **방사선 안전**:
   - 핵의학 검사 간 2일 간격 (방사선 노출 관리)
   - CT→BMD 3일 간격 (조영제 영향)

### 5.2 검사 정확도

1. **금식**: 복부 검사 전 8시간 금식 (영상 품질)
2. **장정결**: 대장내시경과 다른 검사 간격 (장 준비)
3. **약물 영향**: Aspirin 등 출혈 위험 약물 중단 (내시경)

### 5.3 운영 효율성

1. **주말 제한**: 조영 검사 주말 불가 (응급 인력)
2. **시간대 제한**: 소아/특수 검사 시간 제한 (전문 인력)
3. **순서 최적화**: 금식/비금식 검사 순서 배치 (환자 편의)

---

## 6. 데이터 생성 과정

### 6.1 작업 흐름

```
[1단계] 매뉴얼 분석 (2025-12-18)
    └─ PDF 38페이지 전문 검토
    └─ 131개 규칙 추출
    └─ 정형화 가능 여부 분류

[2단계] 스키마 설계 (2025-12-18~22)
    └─ 3개 테이블 구조 정의
    └─ 코드값 체계 설계 (숫자→문자)
    └─ 범용성 개선 (병원 특화 컬럼 제거)

[3단계] 데이터 생성 (2025-12-22)
    └─ EXAM_MASTER: constraints.csv + 추가 14개
    └─ CONDITION_RULES: 매뉴얼 30개 규칙 매핑
    └─ RELATION_RULES: 매뉴얼 50개 규칙 매핑

[4단계] 검증 (2025-12-22~23)
    └─ 참조 무결성 검증
    └─ 매뉴얼-데이터 1:1 대조
    └─ 규칙 충돌 검사
```

### 6.2 코드값 체계 변경 이력

숫자 코드에서 의미있는 문자 코드로 변경:

| 코드 유형 | 변경 전 | 변경 후 |
|----------|---------|---------|
| WALK_IN_POLICY | 1/2/3 | A (Allow), C (Call), R (Reservation) |
| SAME_DAY_CD | 1/2/3 | Y (Yes), N (No), C (Conditional) |
| ACTION_CD | 1~7 | GUARD, NOWEEKEND, TIMEONLY, FASTING, CONSENT, PRETEST, STOPMED |

### 6.3 스키마 개선 이력

| 일자 | 변경 내용 | 사유 |
|------|----------|------|
| 12-18 | SAME_DAY_YN 중복 제거 → SAME_DAY_CD 통합 | 컬럼 중복 해소 |
| 12-18 | CONTRAST_YN, SEDATION_YN 추가 | 조영제/진정 속성 관리 |
| 12-22 | AGE_RESTRICT → MIN_AGE, MAX_AGE | 범용성 향상 |
| 12-22 | REV_GAP_VALUE, REV_GAP_UNIT 추가 | 양방향 간격 표현 |
| 12-23 | AVAIL_START_TIME, AVAIL_END_TIME 추가 | 시간 제한 이원화 |
| 12-23 | EQUIPMENT_TYPE 추가 | 장비 유형 분류 |

---

## 7. 검증 결과

### 7.1 데이터 정합성

| 검증 항목 | 결과 |
|----------|------|
| 참조 무결성 (EXAM_CD) | ✓ 통과 |
| 규칙 충돌 검사 | ✓ 충돌 없음 |
| 순환 참조 검사 | ✓ 순환 없음 |
| 필수 필드 검사 | ✓ 통과 |
| 시간 제한 이원화 충돌 | ✓ 충돌 없음 |

### 7.2 매뉴얼 커버리지

| 테이블 | 총 건수 | 매뉴얼 일치 | 일치율 |
|--------|---------|------------|--------|
| EXAM_MASTER | 265 | 265 | 100% |
| EXAM_RELATION_RULES | 87 | 67+ | 77%+ |
| EXAM_CONDITION_RULES | 47 (20 RULE) | 47 | 100% |

### 7.3 GAP_VALUE NULL 처리

SAME_DAY_CD=N이고 GAP_VALUE=NULL인 경우 20건:
- **해석 규칙**: 기본 1일 간격으로 처리
- **코드 정의서에 명시**: code_definition.csv에 기록

---

## 8. 활용 방안

### 8.1 룰엔진 입력

```python
# 규칙 로드
exam_master = pd.read_csv('EXAM_MASTER.csv')
condition_rules = pd.read_csv('EXAM_CONDITION_RULES.csv')
relation_rules = pd.read_csv('EXAM_RELATION_RULES.csv')

# 환자 조건 검사
def check_patient_condition(patient, exam_cd):
    rules = condition_rules[condition_rules['EXAM_CD'] == exam_cd]
    for _, rule in rules.iterrows():
        if rule['COND_TYPE'] == 'AGE' and eval(f"patient.age {rule['COND_OP']} {rule['COND_VAL']}"):
            return rule['ACTION_CD'], rule['ACTION_VAL']
    return None, None

# 검사 간 관계 확인
def check_relation(exam_a, exam_b):
    rule = relation_rules[
        (relation_rules['EXAM_A'] == exam_a) &
        (relation_rules['EXAM_B'] == exam_b)
    ]
    if len(rule) > 0:
        return rule.iloc[0].to_dict()
    return None
```

### 8.2 예약 시스템 연동

1. **예약 생성 시**: CONDITION_RULES로 가능 여부 체크
2. **다중 예약 시**: RELATION_RULES로 간격/순서 조정
3. **충돌 검출 시**: 위반 규칙 코드 반환

---

## 9. 한계점

### 9.1 스키마 미커버 규칙 (15개)

로직 구현이 필요한 규칙:

| 분류 | 예시 | 사유 |
|------|------|------|
| 시간 기반 동적 계산 | 위내시경 오후 시 8시간 금식 계산 | 예약 시간에 따라 금식 시작 시간 변동 |
| 캘린더/스케줄 조회 | RTC 일주일 전 계산 (공휴일 제외) | 달력 데이터 필요 |
| 복합 조건 처리 | 복합 처방 시 최대 금식시간 적용 | MAX 연산 필요 |
| 텍스트 파싱 | CT 여러개 시 contrast 1개만 과금 | 처방 순회 로직 필요 |

### 9.2 정형화 불필요 규칙 (17개)

| 분류 | 예시 |
|------|------|
| 임시 스케줄/공지 | 교수별 출장/휴직 일정 |
| 기간 한정 변경 | 검사실별 슬롯 운영 공지 |
| 운영 지침 | 업무 유의사항 메모 |

### 9.3 기타 한계

1. **실제 운영 데이터 부재**: 합성 데이터로 실제 패턴과 다를 수 있음
2. **예외 상황 미반영**: 응급/특수 상황의 예외 규칙 제한적
3. **병원별 차이**: 단일 병원 기준으로 타 병원과 상이할 수 있음

---

*최종 업데이트: 2025-12-24*
